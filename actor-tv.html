<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <link rel="icon" href="/favicon.ico">

    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOMITO | صفحة الممثل</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <script src="anti-devtools.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #E50914;
            --primary-dark: #B20710;
            --bg-dark: #141414;
            --bg-darker: #0F0F0F;   
            --bg-light: #1F1F1F;
            --text: #FFFFFF;
            --text-secondary: #B3B3B3;  
            --border: #333333;
            --success: #27AE60;
            --warning: #F39C12;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* شريط التقدم */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--primary);
            z-index: 9999;
            transform-origin: left;
            transition: transform 0.3s ease;
            width: 100%;
        }

        /* شاشة التحميل */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9998;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* الهيدر */
        .site-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 100%);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text);
            text-decoration: none;
            padding: 8px 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(-5px);
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
            font-family: 'Arial Black', sans-serif;
        }

        .actor-title-header {
            font-size: 1.2rem;
            color: var(--text);
            margin-right: 20px;
        }

        /* قسم معلومات الممثل */
        .actor-profile-section {
            margin-top: 100px;
            padding: 40px 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .actor-details {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 40px;
            background: var(--bg-light);
            border-radius: 20px;
            overflow: hidden;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        @media (max-width: 992px) {
            .actor-details {
                grid-template-columns: 1fr;
            }
        }

        .actor-poster-container {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            height: fit-content;
        }

        .actor-profile-img {
            width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }

        .actor-profile-img:hover {
            transform: scale(1.02);
        }

        .actor-profile-overlay {
            position: absolute;
            top: 15px;
            left: 15px;
        }

        .actor-popularity {
            background: rgba(0,0,0,0.8);
            color: var(--text);
            padding: 8px 15px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
        }

        .actor-info {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .actor-header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: var(--text);
            line-height: 1.2;
        }

        .actor-biography {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.1rem;
            text-align: justify;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .actor-biography::-webkit-scrollbar {
            width: 5px;
        }

        .actor-biography::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        .actor-biography::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .actor-meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .actor-meta-item {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: background 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        .actor-meta-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .actor-meta-icon {
            font-size: 1.5rem;
            color: var(--primary);
            min-width: 30px;
        }

        .actor-meta-content h4 {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .actor-meta-content p {
            color: var(--text);
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* قسم أعمال الممثل */
        .actor-works-section {
            padding: 60px 0;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .section-title {
            font-size: 2rem;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: var(--bg-light);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-family: inherit;
        }

        .filter-btn:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text);
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .works-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .work-card {
            background: var(--bg-light);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
            height: 100%;
        }

        .work-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(229, 9, 20, 0.2);
        }

        .work-poster {
            width: 100%;
            height: 280px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .work-card:hover .work-poster {
            transform: scale(1.05);
        }

        .work-info {
            padding: 20px;
        }

        .work-title {
            color: var(--text);
            font-size: 1.1rem;
            margin-bottom: 10px;
            height: 50px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .work-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .work-year {
            color: var(--primary);
            font-weight: bold;
        }

        .work-rating {
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .work-character {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: italic;
            margin-top: 5px;
            height: 40px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .work-type {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }

        /* زر تحميل المزيد */
        .load-more-container {
            text-align: center;
            margin-top: 40px;
        }

        .load-more-btn {
            padding: 15px 40px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .load-more-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(229, 9, 20, 0.3);
        }

        .load-more-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* قسم صور الممثل */
        .actor-images-section {
            padding: 60px 0;
            background: var(--bg-darker);
        }

        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
        }

        .image-item {
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            height: 250px;
        }

        .image-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* إشعارات */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--bg-light);
            color: var(--text);
            padding: 15px 25px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 9999;
            animation: slideInRight 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border-left: 4px solid var(--primary);
            max-width: 400px;
        }

        .notification.success {
            border-left-color: var(--success);
        }

        .notification.error {
            border-left-color: #e74c3c;
        }

        .notification.info {
            border-left-color: #3498db;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* الفوتر */
        .site-footer {
            background: var(--bg-darker);
            padding: 50px 0;
            margin-top: 60px;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            text-align: center;
        }

        .footer-logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 20px;
            font-family: 'Arial Black', sans-serif;
        }

        .footer-description {
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.8;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--text);
        }

        .copyright {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* تصميم متجاوب */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 15px;
            }

            .logo {
                font-size: 1.5rem;
            }

            .actor-title-header {
                display: none;
            }

            .actor-header h1 {
                font-size: 2rem;
            }

            .actor-details {
                padding: 20px;
            }

            .works-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 20px;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .filter-controls {
                justify-content: center;
            }

            .images-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .works-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 15px;
            }

            .actor-header h1 {
                font-size: 1.8rem;
            }

            .actor-meta-grid {
                grid-template-columns: 1fr;
            }

            .footer-links {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>

<script>
    atOptions = {
      'key' : 'f04a37538c06d079b05a55a92ec6338f',
      'format' : 'iframe',
      'height' : 60,
      'width' : 468,
      'params' : {}
    };
  </script>
  <script src="https://www.highperformanceformat.com/f04a37538c06d079b05a55a92ec6338f/invoke.js"></script>
<body>
    <!-- شريط التقدم -->
    <div class="progress-bar" id="progress-bar"></div>
    
    <!-- شاشة التحميل -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">جاري تحميل معلومات الممثل...</div>
    </div>
    
    <!-- الهيدر -->
    <header class="site-header">
        <div class="header-content">
            <div class="header-left">
                <button onclick="window.history.back()" class="back-btn">
                    <i class="fas fa-arrow-right"></i>
                    <span>رجوع</span>
                </button>
                <a href="index.html" class="logo">TOMITO</a>
                <div class="actor-title-header" id="actor-title-header">جاري التحميل...</div>
            </div>
        </div>
    </header>
    
    <!-- قسم معلومات الممثل -->
    <section class="actor-profile-section">
        <div class="container">
            <div class="actor-details">
                <div class="actor-poster-container">
                    <img id="actor-profile-img" src="https://via.placeholder.com/350x500/1a1a1a/fff?text=جاري+التحميل" 
                         alt="صورة الممثل" class="actor-profile-img">
                    <div class="actor-profile-overlay">
                        <div class="actor-popularity">
                            <i class="fas fa-chart-line"></i>
                            <span id="actor-popularity">--</span>
                        </div>
                    </div>
                </div>
                
                <div class="actor-info">
                    <div class="actor-header">
                        <h1 id="actor-name">جاري التحميل...</h1>
                        <div class="actor-biography" id="actor-biography">
                            جاري تحميل السيرة الذاتية...
                        </div>
                    </div>
                    
                    <div class="actor-meta-grid" id="actor-meta">
                        <!-- سيتم ملؤها بالـJavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- قسم أعمال الممثل -->
    <section class="actor-works-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-film"></i>
                    أعمال الممثل
                </h2>
                <div class="filter-controls">
                    <button class="filter-btn active" onclick="filterWorks('all')">الكل</button>
                    <button class="filter-btn" onclick="filterWorks('movie')">أفلام</button>
                    <button class="filter-btn" onclick="filterWorks('tv')">مسلسلات</button>
                    <button class="filter-btn" onclick="sortWorks('popular')">الأشهر</button>
                </div>
            </div>
            
            <div class="works-grid" id="works-grid">
                <!-- سيتم ملؤها بالـJavaScript -->
            </div>
            
            <div class="load-more-container">
                <button class="load-more-btn" id="load-more-btn" onclick="loadMoreWorks()">
                    <i class="fas fa-plus"></i>
                    تحميل المزيد
                </button>
            </div>
        </div>
    </section>
    
    <!-- قسم صور الممثل -->
    <section class="actor-images-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-images"></i>
                صور الممثل
            </h2>
            <div class="images-grid" id="images-grid">
                <!-- سيتم ملؤها بالـJavaScript -->
            </div>
        </div>
    </section>
    
    <!-- الفوتر -->
    <script>
        atOptions = {
          'key' : 'f04a37538c06d079b05a55a92ec6338f',
          'format' : 'iframe',
          'height' : 60,
          'width' : 468,
          'params' : {}
        };
      </script>
      <script src="https://www.highperformanceformat.com/f04a37538c06d079b05a55a92ec6338f/invoke.js"></script>
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">TOMITO</div>
                <p class="footer-description">منصة الترفيه الأولى لمشاهدة الأفلام والمسلسلات العربية والعالمية</p>
              
                <p class="copyright">© 2024 جميع الحقوق محفوظة - Tomito Entertainment</p>
            </div>
        </div>
    </footer>

    <script>
        // ===========================================
        // الإعدادات الأساسية
        // ===========================================
        const API_KEY = "882e741f7283dc9ba1654d4692ec30f6";
        const BASE_URL = "https://api.themoviedb.org/3";
        const IMAGE_URL = "https://image.tmdb.org/t/p";

        // ===========================================
        // متغيرات التطبيق
        // ===========================================
        let actorId = null;
        let actorData = null;
        let creditsData = null;
        let imagesData = null;
        let currentFilter = 'all';
        let currentSort = 'popular';
        let displayedWorks = 20;
        let allWorks = [];

        // ===========================================
        // تحميل البيانات عند فتح الصفحة
        // ===========================================
        document.addEventListener('DOMContentLoaded', () => {
            // الحصول على معرف الممثل من الرابط
            const params = new URLSearchParams(window.location.search);
            actorId = params.get('id');
            
            if (!actorId) {
                showError('لم يتم العثور على معرف الممثل');
                return;
            }
            
            loadActorData();
            updateProgressBar();
        });

        // ===========================================
        // تحميل بيانات الممثل
        // ===========================================
        async function loadActorData() {
            showLoading(true);
            
            try {
                // تحميل بيانات الممثل الأساسية
                const [actorResponse, creditsResponse, imagesResponse] = await Promise.all([
                    fetch(`${BASE_URL}/person/${actorId}?api_key=${API_KEY}&language=en`),
                    fetch(`${BASE_URL}/person/${actorId}/combined_credits?api_key=${API_KEY}&language=en`),
                    fetch(`${BASE_URL}/person/${actorId}/images?api_key=${API_KEY}`)
                ]);
                
                if (!actorResponse.ok || !creditsResponse.ok) {
                    throw new Error('فشل في تحميل البيانات');
                }
                
                actorData = await actorResponse.json();
                creditsData = await creditsResponse.json();
                imagesData = await imagesResponse.json();
                
                // تحديث واجهة المستخدم
                updateActorUI();
                updateWorksGrid();
                updateImagesGrid();
                
                // إخفاء شاشة التحميل
                showLoading(false);
                
            } catch (error) {
                console.error('خطأ في تحميل البيانات:', error);
                showError('حدث خطأ في تحميل بيانات الممثل');
                showLoading(false);
            }
        }

        // ===========================================
        // تحديث واجهة الممثل
        // ===========================================
        function updateActorUI() {
            if (!actorData) return;
            
            // تحديث العنوان
            document.title = `${actorData.name} - TOMITO`;
            
            // تحديث الهيدر
            const headerTitle = document.getElementById('actor-title-header');
            if (headerTitle) {
                headerTitle.textContent = actorData.name;
            }
            
            // تحديث الصورة
            const profileImg = document.getElementById('actor-profile-img');
            const popularity = document.getElementById('actor-popularity');
            
            if (profileImg && actorData.profile_path) {
                profileImg.src = `${IMAGE_URL}/w500${actorData.profile_path}`;
                profileImg.alt = actorData.name;
            }
            
            if (popularity) {
                popularity.textContent = actorData.popularity?.toFixed(1) || '--';
            }
            
            // تحديث الاسم
            const actorName = document.getElementById('actor-name');
            if (actorName) actorName.textContent = actorData.name;
            
            // تحديث السيرة الذاتية
            const biography = document.getElementById('actor-biography');
            if (biography) {
                biography.textContent = actorData.biography 
                    ? actorData.biography.substring(0, 1000) + (actorData.biography.length > 1000 ? '...' : '')
                    : 'لا توجد سيرة ذاتية متاحة';
            }
            
            // تحديث المعلومات الرئيسية
            updateActorMeta();
        }

        // ===========================================
        // تحديث معلومات الممثل
        // ===========================================
        function updateActorMeta() {
            const metaGrid = document.getElementById('actor-meta');
            if (!metaGrid || !actorData) return;
            
            const metaData = [
                {
                    icon: 'chart-line',
                    title: 'الشهرة',
                    value: actorData.popularity?.toFixed(1) || '--'
                },
                {
                    icon: 'film',
                    title: 'عدد الأعمال',
                    value: creditsData?.cast?.length || '--'
                },
                {
                    icon: 'birthday-cake',
                    title: 'تاريخ الميلاد',
                    value: formatDate(actorData.birthday) || 'غير معروف'
                },
                {
                    icon: 'map-marker-alt',
                    title: 'مكان الميلاد',
                    value: actorData.place_of_birth || 'غير معروف'
                },
                {
                    icon: 'transgender',
                    title: 'النوع',
                    value: actorData.gender === 1 ? 'أنثى' : actorData.gender === 2 ? 'ذكر' : 'غير محدد'
                },
                {
                    icon: 'briefcase',
                    title: 'المهنة',
                    value: actorData.known_for_department || '--'
                }
            ];
            
            metaGrid.innerHTML = metaData.map(item => `
                <div class="actor-meta-item">
                    <i class="fas fa-${item.icon} actor-meta-icon"></i>
                    <div class="actor-meta-content">
                        <h4>${item.title}</h4>
                        <p>${item.value}</p>
                    </div>
                </div>
            `).join('');
        }

        // ===========================================
        // تحديث قائمة الأعمال
        // ===========================================
        function updateWorksGrid() {
            if (!creditsData) return;
            
            const worksGrid = document.getElementById('works-grid');
            if (!worksGrid) return;
            
            // تجميع جميع الأعمال
            allWorks = creditsData.cast || [];
            
            // تطبيق الفلاتر والترتيب
            let filteredWorks = [...allWorks];
            
            // التصفية حسب النوع
            if (currentFilter === 'movie') {
                filteredWorks = filteredWorks.filter(work => work.media_type === 'movie');
            } else if (currentFilter === 'tv') {
                filteredWorks = filteredWorks.filter(work => work.media_type === 'tv');
            }
            
            // الترتيب
            if (currentSort === 'popular') {
                filteredWorks.sort((a, b) => (b.popularity || 0) - (a.popularity || 0));
            } else if (currentSort === 'year') {
                filteredWorks.sort((a, b) => {
                    const yearA = a.release_date || a.first_air_date || '';
                    const yearB = b.release_date || b.first_air_date || '';
                    return yearB.localeCompare(yearA);
                });
            } else if (currentSort === 'rating') {
                filteredWorks.sort((a, b) => (b.vote_average || 0) - (a.vote_average || 0));
            }
            
            // إظهار العدد المطلوب من الأعمال
            const worksToShow = filteredWorks.slice(0, displayedWorks);
            
            if (worksToShow.length === 0) {
                worksGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #999;">
                        <i class="fas fa-film" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3>لا توجد أعمال متاحة</h3>
                    </div>
                `;
                return;
            }
            
            worksGrid.innerHTML = worksToShow.map(work => {
                const isMovie = work.media_type === 'movie';
                const title = work.title || work.name || 'بدون عنوان';
                const year = (work.release_date || work.first_air_date || '').substring(0, 4) || '--';
                const poster = work.poster_path ? `${IMAGE_URL}/w300${work.poster_path}` : 'https://via.placeholder.com/300x450/1a1a1a/fff?text=No+Image';
                const character = work.character || '--';
                const rating = work.vote_average ? work.vote_average.toFixed(1) : '--';
                const type = isMovie ? 'فيلم' : 'مسلسل';
                const id = work.id;
                
                return `
                    <div class="work-card" onclick="openWork('${work.media_type}', ${id})">
                        <span class="work-type">${type}</span>
                        <img src="${poster}" 
                             alt="${title}" 
                             class="work-poster"
                             onerror="this.src='https://via.placeholder.com/300x450/1a1a1a/fff?text=No+Image'">
                        <div class="work-info">
                            <div class="work-title">${title}</div>
                            <div class="work-meta">
                                <span class="work-year">${year}</span>
                                <span class="work-rating">
                                    <i class="fas fa-star"></i>
                                    ${rating}
                                </span>
                            </div>
                            <div class="work-character">${character}</div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // تحديث زر تحميل المزيد
            const loadMoreBtn = document.getElementById('load-more-btn');
            if (loadMoreBtn) {
                loadMoreBtn.disabled = displayedWorks >= filteredWorks.length;
            }
        }

        // ===========================================
        // تحديث معرض الصور
        // ===========================================
        function updateImagesGrid() {
            if (!imagesData) return;
            
            const imagesGrid = document.getElementById('images-grid');
            if (!imagesGrid) return;
            
            const images = imagesData.profiles?.slice(0, 12) || [];
            
            if (images.length === 0) {
                imagesGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #999;">
                        <i class="fas fa-image" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3>لا توجد صور متاحة</h3>
                    </div>
                `;
                return;
            }
            
            imagesGrid.innerHTML = images.map(image => `
                <div class="image-item" onclick="openImageModal('${IMAGE_URL}/original${image.file_path}')">
                    <img src="${IMAGE_URL}/w300${image.file_path}" 
                         alt="صورة ${actorData?.name}"
                         onerror="this.style.display='none'">
                </div>
            `).join('');
        }

        // ===========================================
        // فلاتر الأعمال
        // ===========================================
        function filterWorks(type) {
            currentFilter = type;
            displayedWorks = 20;
            
            // تحديث أزرار الفلاتر
            document.querySelectorAll('.filter-controls .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // تحديث القائمة
            updateWorksGrid();
        }

        // ===========================================
        // ترتيب الأعمال
        // ===========================================
        function sortWorks(type) {
            currentSort = type;
            updateWorksGrid();
        }

        // ===========================================
        // تحميل المزيد من الأعمال
        // ===========================================
        function loadMoreWorks() {
            displayedWorks += 20;
            updateWorksGrid();
        }

        // ===========================================
        // فتح صفحة العمل (فيلم/مسلسل)
        // ===========================================
        function openWork(type, id) {
            if (type === 'movie') {
                window.location.href = `watch.html?id=${id}`;
            } else if (type === 'tv') {
                window.location.href = `watch-tv.html?id=${id}`;
            }
        }

        // ===========================================
        // فتح صورة في مودال
        // ===========================================
        function openImageModal(imageUrl) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 9999;
                animation: fadeIn 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="position: relative; max-width: 90%; max-height: 90%;">
                    <img src="${imageUrl}" 
                         alt="صورة ${actorData?.name}"
                         style="max-width: 100%; max-height: 90vh; border-radius: 10px;">
                    <button onclick="closeModal(this)" 
                            style="position: absolute; top: 15px; left: 15px;
                                   background: rgba(0,0,0,0.7); color: white;
                                   border: none; border-radius: 50%; width: 40px;
                                   height: 40px; font-size: 1.5rem; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // إغلاق عند النقر خارج الصورة
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
            
            // إضافة الأنيميشن
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
            `;
            document.head.appendChild(style);
        }

        function closeModal(btn) {
            const modal = btn.closest('div[style*="position: fixed"]');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(modal);
                }, 300);
            }
        }

        // ===========================================
        // دوال مساعدة
        // ===========================================
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-EG');
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progress-bar');
            if (!progressBar) return;
            
            window.addEventListener('scroll', () => {
                const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (window.scrollY / windowHeight) * 100;
                progressBar.style.transform = `scaleX(${scrolled / 100})`;
            });
        }

        function showLoading(show) {
            const loadingScreen = document.getElementById('loading-screen');
            if (!loadingScreen) return;
            
            if (show) {
                loadingScreen.style.display = 'flex';
            } else {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }
        }

        function showNotification(message, type = 'info') {
            // إزالة الإشعارات القديمة
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            // إنشاء إشعار جديد
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // إخفاء الإشعار بعد 3 ثواني
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function showError(message) {
            showNotification(message, 'error');
        }
    </script>
    <script src="anti-devtools.js"></script>
    <script src="https://pl28403821.effectivegatecpm.com/d3/d3/09/d3d309d5b609d8a118c7e64605eac7b5.js"></script>

</body>   
</html>     
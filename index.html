<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomito - Watch Movies & TV Shows Online</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========================================
           RESET & BASE STYLES
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ========================================
           ANIMATED TOMITO LOGO STYLES - UPDATED
           ======================================== */
        .logo--area {
            min-width: 250px;
            max-width: 250px;
            position: relative;
        }

        .logo--area h1 {
            margin: 0;
            padding: 0;
        }

        .logo--area a {
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
        }

        /* ÿßŸÑŸÜÿµ ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä */
        .en-text {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0;
            font-family: 'Arial Black', 'Segoe UI', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            height: 50px;
            position: relative;
            margin-bottom: 5px;
        }

        .en-text span {
            display: inline-block;
            position: relative;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: default;
            color: #fff;
        }

        /* ÿ≠ÿ±ŸÅ T ŸÅŸä ÿßŸÑŸàÿ≥ÿ∑ */
        .en-text span:nth-child(2) {
            color: #CF0A0A;
            font-size: 3rem;
            z-index: 2;
        }

        /* ÿ™ÿ£ÿ´Ÿäÿ± ÿ™ÿ≠ŸàŸÖ ÿßŸÑŸÖÿßŸàÿ≥ ÿπŸÑŸâ ÿßŸÑÿ¥ÿπÿßÿ± */
        .en-text:hover span:nth-child(1) {
            transform: translateX(-80px) rotate(-10deg);
            opacity: 0;
        }

        .en-text:hover span:nth-child(2) {
            transform: translateY(-100px) rotate(45deg);
            opacity: 0;
        }

        .en-text:hover span:nth-child(3) {
            transform: translateX(80px) rotate(10deg);
            opacity: 0;
        }

        /* ÿßŸÑŸÜÿµ ÿßŸÑÿπÿ±ÿ®Ÿä - ŸÖÿÆŸÅŸä ŸÅŸä ÿßŸÑÿ®ÿØÿßŸäÿ© */
        .ar-text {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            font-family: 'Arial', 'Segoe UI', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            height: 40px;
            margin-top: -10px;
            position: relative;
        }

        .ar-text span {
            color: #EEEEEE;
            display: inline-block;
            position: absolute;
            opacity: 0;
            transform: translateX(0);
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* ÿπŸÜÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÖ ÿπŸÑŸâ ÿßŸÑÿ¥ÿπÿßÿ± ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿå Ÿäÿ∏Ÿáÿ± ÿßŸÑÿπÿ±ÿ®Ÿä */
        .en-text:hover ~ .ar-text span:nth-child(1) {
            opacity: 1;
            transform: translateX(-40px);
            transition-delay: 0.2s;
            color: #DC5F00;
        }

        .en-text:hover ~ .ar-text span:nth-child(2) {
            opacity: 1;
            transform: translateX(0);
            transition-delay: 0.4s;
            color: #CF0A0A;
        }

        /* ÿπŸÜÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÖ ÿπŸÑŸâ ÿßŸÑŸÜÿµ ÿßŸÑÿπÿ±ÿ®Ÿä ŸÜŸÅÿ≥Ÿá */
        .ar-text:hover span:nth-child(1) {
            transform: translateX(-50px);
            color: #DC5F00;
        }

        .ar-text:hover span:nth-child(2) {
            transform: translateX(10px);
            color: #CF0A0A;
        }

        /* ÿ•ÿ¥ÿßÿ±ÿ© ÿ∑ŸÖÿßÿ∑ŸÖ ÿÆŸÅŸäÿ© */
        .logo--area::after {
            content: "üçÖ";
            position: absolute;
            top: 5px;
            right: -30px;
            font-size: 1.2rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .logo--area:hover::after {
            opacity: 1;
        }

        /* ========================================
           NAVBAR STYLES - UPDATED FOR MOBILE
           ======================================== */
        .navbar {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            padding: 0.8rem 5%;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 2px solid #CF0A0A;
            transition: all 0.4s ease;
            transform: translateY(0);
        }

        .navbar.hidden {
            transform: translateY(-100%);
        }

        .navbar.compact {
            padding: 0.4rem 5%;
            transform: scale(0.95);
            transform-origin: top;
            opacity: 0.9;
        }

        .navbar.compact.hidden {
            transform: translateY(-100%) scale(0.95);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: #EEEEEE;
            text-decoration: none;
            font-size: 1.1rem;
            transition: color 0.3s;
            position: relative;
            padding: 5px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link:hover {
            color: #DC5F00;
        }

        .nav-link.active {
            color: #CF0A0A;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #CF0A0A, #DC5F00);
        }

        /* ========================================
           COLOR FILTERS SECTION
           ======================================== */
        .color-filters {
            margin-top: 80px;
            padding: 1.5rem 5%;
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: margin-top 0.3s ease;
        }

        .color-filters.shifted {
            margin-top: 60px;
        }

        .color-filters-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .color-filters-grid {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: #CF0A0A #1a1a2e;
        }

        .color-filters-grid::-webkit-scrollbar {
            height: 6px;
        }

        .color-filters-grid::-webkit-scrollbar-track {
            background: #1a1a2e;
            border-radius: 10px;
        }

        .color-filters-grid::-webkit-scrollbar-thumb {
            background: #CF0A0A;
            border-radius: 10px;
        }

        .color-filter-btn {
            padding: 15px 25px;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            min-width: 150px;
            justify-content: center;
        }

        .color-filter-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .color-filter-btn.black {
            background: #000000;
            color: #EEEEEE;
            border-color: #333;
        }

        .color-filter-btn.red {
            background: #CF0A0A;
            color: white;
            border-color: #FF4444;
        }

        .color-filter-btn.orange {
            background: #DC5F00;
            color: white;
            border-color: #FF8C42;
        }

        .color-filter-btn.gray {
            background: #EEEEEE;
            color: #000000;
            border-color: #CCCCCC;
        }

        .color-filter-btn.active {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.2);
        }

        /* ========================================
           EXTENDED FILTERS SECTION - IMPROVED
           ======================================== */
        .extended-filters {
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem 5%;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 0;
            position: relative;
        }

        .extended-filters-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .extended-filters-grid {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: #DC5F00 #1a1a2e;
        }

        .extended-filters-grid::-webkit-scrollbar {
            height: 4px;
        }

        .extended-filters-grid::-webkit-scrollbar-track {
            background: #1a1a2e;
            border-radius: 10px;
        }

        .extended-filters-grid::-webkit-scrollbar-thumb {
            background: #DC5F00;
            border-radius: 10px;
        }

        .extended-filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: #EEEEEE;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 0.9rem;
            font-weight: 500;
            flex-shrink: 0;
        }

        .extended-filter-btn:hover {
            background: rgba(207, 10, 10, 0.3);
            transform: translateY(-2px);
        }

        .extended-filter-btn.active {
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            border-color: transparent;
            font-weight: 600;
        }

        /* ÿ≤ÿ± ÿßŸÑŸÖÿ≤ŸäÿØ */
        .more-filters-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: #EEEEEE;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            position: relative;
        }

        .more-filters-btn:hover {
            background: rgba(207, 10, 10, 0.4);
            transform: translateY(-2px);
        }

        .more-filters-btn.active {
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            border-color: transparent;
        }

        /* ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ© */
        .filters-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(207, 10, 10, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            z-index: 100;
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .filters-dropdown.show {
            display: grid;
            animation: fadeIn 0.3s ease;
        }

        /* ========================================
           SEARCH BAR STYLES
           ======================================== */
        .search-container {
            position: relative;
            width: 350px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            padding-right: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(207, 10, 10, 0.3);
            border-radius: 50px;
            color: #EEEEEE;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #CF0A0A;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 15px rgba(207, 10, 10, 0.2);
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #DC5F00;
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .search-btn:hover {
            color: #CF0A0A;
        }

        /* ========================================
           SAVE BUTTON
           ======================================== */
        .save-btn {
            background: none;
            border: none;
            color: #EEEEEE;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
            transition: all 0.3s;
            position: relative;
        }

        .save-btn:hover {
            color: #CF0A0A;
            transform: scale(1.1);
        }

        .save-btn.saved i {
            color: #CF0A0A;
            animation: heartBeat 0.5s;
        }

        @keyframes heartBeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        /* ========================================
           MAIN CONTENT
           ======================================== */
        .main-content {
            margin-top: 0;
            padding: 2rem 5%;
        }

        /* ========================================
           FEATURED CAROUSEL SECTION
           ======================================== */
        .featured-section {
            margin-bottom: 4rem;
            position: relative;
            overflow: hidden;
        }

        .featured-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
        
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        
        }

        .section-title {
            font-size: 2.2rem;
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title i {
            font-size: 2.5rem;
            color: #DC5F00;
        }

        .view-all-btn {
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .view-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(207, 10, 10, 0.4);
        }

        /* ========================================
           ENHANCED CAROUSEL
           ======================================== */
        .carousel-container {
            position: relative;
            overflow: hidden;
            padding: 20px 0;
        }

        .carousel-track {
            display: flex;
            gap: 1.5rem;
            transition: transform 0.5s ease;
            padding: 1rem 0;
        }

        .carousel-card {
            flex: 0 0 280px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            transition: all 0.4s;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            height: 400px;
            background: #000000;
        }

        .carousel-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 0 25px 40px rgba(207, 10, 10, 0.4);
        }

        .carousel-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .carousel-card:hover img {
            transform: scale(1.1);
        }

        .carousel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95), transparent);
            padding: 2rem;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.4s;
        }

        .carousel-card:hover .carousel-overlay {
            transform: translateY(0);
            opacity: 1;
        }

        .carousel-card-title {
            font-size: 1.4rem;
            color: #EEEEEE;
            margin-bottom: 0.8rem;
            font-weight: 700;
        }

        .carousel-card-info {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.2rem;
            flex-wrap: wrap;
        }

        .carousel-rating {
            background: rgba(255, 215, 0, 0.2);
            padding: 6px 12px;
            border-radius: 15px;
            color: #FFD700;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .carousel-year {
            background: rgba(220, 95, 0, 0.3);
            padding: 6px 12px;
            border-radius: 15px;
            color: #DC5F00;
            font-size: 0.95rem;
        }

        .carousel-card-description {
            font-size: 0.9rem;
            color: #CCCCCC;
            line-height: 1.5;
            margin-bottom: 1.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .carousel-card-btns {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }

        .carousel-play-btn {
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            flex: 1;
            justify-content: center;
        }

        .carousel-play-btn:hover {
            background: linear-gradient(45deg, #DC5F00, #CF0A0A);
            transform: scale(1.05);
        }

        .carousel-save-btn {
            background: rgba(238, 238, 238, 0.2);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            width: 45px;
            height: 45px;
        }

        .carousel-save-btn:hover {
            background: rgba(207, 10, 10, 0.5);
            transform: scale(1.1);
        }

        /* ========================================
           INFINITE CAROUSEL NAVIGATION
           ======================================== */
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s;
            border: 2px solid #CF0A0A;
        }

        .carousel-nav:hover {
            background: #CF0A0A;
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-prev {
            right: 20px;
        }

        .carousel-next {
            left: 20px;
        }

        /* ========================================
           ALL MOVIES SECTION
           ======================================== */
        .all-movies-section {
            margin-bottom: 4rem;
        }

        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        /* ========================================
           MOVIE CARD
           ======================================== */
        .movie-card {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.4s;
            height: 420px;
            background: #000000;
            border: 1px solid rgba(207, 10, 10, 0.1);
        }

        .movie-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 35px rgba(207, 10, 10, 0.3);
            border-color: #CF0A0A;
        }

        .movie-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .movie-card:hover img {
            transform: scale(1.08);
        }

        .movie-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95), transparent);
            padding: 1.8rem;
            transform: translateY(100%);
            transition: transform 0.4s;
        }

        .movie-card:hover .movie-overlay {
            transform: translateY(0);
        }

        .movie-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .movie-header h3 {
            font-size: 1.3rem;
            color: #EEEEEE;
            margin: 0;
            flex: 1;
            line-height: 1.4;
            font-weight: 600;
        }

        .movie-rating {
            background: rgba(207, 10, 10, 0.3);
            padding: 6px 10px;
            border-radius: 15px;
            font-size: 0.95rem;
            color: #FFD700;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }

        .movie-info {
            display: flex;
            gap: 1rem;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .movie-year {
            background: rgba(220, 95, 0, 0.3);
            padding: 6px 12px;
            border-radius: 15px;
            color: #DC5F00;
            font-size: 0.9rem;
        }

        .movie-genre {
            background: rgba(0, 123, 255, 0.3);
            padding: 6px 12px;
            border-radius: 15px;
            color: #4DA8DA;
            font-size: 0.9rem;
        }

        .movie-description {
            font-size: 0.9rem;
            color: #CCCCCC;
            margin-bottom: 20px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .movie-actions {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }

        .play-btn-sm {
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            flex: 1;
            justify-content: center;
        }

        .play-btn-sm:hover {
            background: linear-gradient(45deg, #DC5F00, #CF0A0A);
            transform: scale(1.05);
        }

        .save-btn-sm {
            background: rgba(238, 238, 238, 0.2);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            width: 45px;
            height: 45px;
        }

        .save-btn-sm:hover {
            background: rgba(207, 10, 10, 0.5);
            transform: scale(1.1);
        }

        /* ========================================
           INFINITE PAGINATION
           ======================================== */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
            padding: 1rem;
            flex-wrap: wrap;
        }

        .page-link {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(207, 10, 10, 0.3);
            color: #EEEEEE;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            min-width: 40px;
            text-align: center;
        }

        .page-link:hover:not(.cursor-normal) {
            background: rgba(207, 10, 10, 0.3);
            transform: scale(1.05);
        }

        .page-link.active {
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            border-color: transparent;
            transform: scale(1.1);
        }

        .cursor-pointer {
            cursor: pointer;
        }

        .cursor-normal {
            cursor: default;
            background: rgba(207, 10, 10, 0.5);
        }

        .pagination-nav-btn {
            background: rgba(207, 10, 10, 0.3);
            border: 1px solid #CF0A0A;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .pagination-nav-btn:hover:not(:disabled) {
            background: #CF0A0A;
            transform: scale(1.05);
        }

        .pagination-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ========================================
           PROGRESS BAR
           ======================================== */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, #CF0A0A, #DC5F00, #EEEEEE);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s;
            z-index: 2000;
            display: none;
        }

        /* ========================================
           NO MOVIES MESSAGE
           ======================================== */
        .no-movies {
            grid-column: 1 / -1;
            text-align: center;
            padding: 4rem;
            color: #888;
            font-size: 1.3rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            border: 2px dashed #CF0A0A;
        }

        /* ========================================
           RESPONSIVE DESIGN - IMPROVED FOR MOBILE
           ======================================== */
        @media (max-width: 1024px) {
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .carousel-card {
                flex: 0 0 250px;
                height: 380px;
            }
            
            .search-container {
                width: 300px;
            }
            
            .en-text {
                font-size: 2rem;
            }
            
            .en-text span:nth-child(2) {
                font-size: 2.5rem;
            }
            
            .ar-text {
                font-size: 1.5rem;
            }
            
            .navbar {
                padding: 0.7rem 5%;
            }
            
            .logo--area {
                min-width: 200px;
                max-width: 200px;
            }
        }

        @media (max-width: 768px) {
            /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿßŸÑŸáŸäÿØÿ± ŸÑŸÑŸáÿßÿ™ŸÅ */
            .navbar {
                padding: 0.5rem 5%;
            }
            
            .navbar.compact {
                padding: 0.3rem 5%;
                transform: scale(0.9);
            }
            
            .nav-container {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 0.8rem;
            }
            
            .nav-link {
                font-size: 0.95rem;
                padding: 4px 0;
            }
            
            .nav-link i {
                font-size: 0.9rem;
            }
            
            .logo--area {
                min-width: 180px;
                max-width: 180px;
            }
            
            .en-text {
                font-size: 1.7rem;
                height: 35px;
            }
            
            .en-text span:nth-child(2) {
                font-size: 2rem;
            }
            
            .ar-text {
                font-size: 1.2rem;
                height: 30px;
                margin-top: -8px;
            }
            
            .search-container {
                width: 100%;
                max-width: 400px;
            }
            
            .search-input {
                padding: 10px 16px;
                padding-right: 45px;
                font-size: 0.95rem;
            }
            
            .save-btn {
                font-size: 1.3rem;
                padding: 8px;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 1.5rem;
            }
            
            .movie-card {
                height: 380px;
            }
            
            .carousel-card {
                flex: 0 0 220px;
                height: 350px;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .color-filters {
                margin-top: 140px;
            }
            
            .carousel-nav {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }
            
            /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿ≤ÿ± ÿßŸÑŸÖÿ≤ŸäÿØ */
            .extended-filter-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .more-filters-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .filters-dropdown {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                max-height: 250px;
            }
        }

        @media (max-width: 480px) {
            /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸÑŸáŸàÿßÿ™ŸÅ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© */
            .navbar {
                padding: 0.4rem 5%;
            }
            
            .navbar.compact {
                padding: 0.2rem 5%;
                transform: scale(0.85);
            }
            
            .nav-links {
                gap: 0.6rem;
            }
            
            .nav-link {
                font-size: 0.85rem;
                gap: 5px;
            }
            
            .nav-link i {
                font-size: 0.8rem;
            }
            
            .logo--area {
                min-width: 150px;
                max-width: 150px;
            }
            
            .en-text {
                font-size: 1.4rem;
                height: 30px;
            }
            
            .en-text span:nth-child(2) {
                font-size: 1.7rem;
            }
            
            .ar-text {
                font-size: 1rem;
                height: 25px;
                margin-top: -6px;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 1rem;
            }
            
            .movie-card {
                height: 320px;
            }
            
            .carousel-card {
                flex: 0 0 180px;
                height: 300px;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .color-filter-btn {
                min-width: 130px;
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .carousel-nav {
                display: none;
            }
            
            .extended-filter-btn {
                padding: 7px 14px;
                font-size: 0.8rem;
            }
            
            .more-filters-btn {
                padding: 7px 14px;
                font-size: 0.8rem;
            }
            
            .filters-dropdown {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                max-height: 200px;
                padding: 10px;
            }
            
            .view-all-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }

        /* ========================================
           ANIMATIONS
           ======================================== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .movie-card {
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
        }

        /* ========================================
           SCROLLBAR STYLING
           ======================================== */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a2e;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #CF0A0A, #DC5F00);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #DC5F00, #CF0A0A);
        }

        /* ========================================
           FOOTER
           ======================================== */
        .footer {
            background: rgba(0, 0, 0, 0.9);
            padding: 2rem 5%;
            text-align: center;
            margin-top: 3rem;
            border-top: 2px solid #CF0A0A;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-logo {
            font-size: 1.5rem;
            background: linear-gradient(45deg, #CF0A0A, #DC5F00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .footer-link {
            color: #EEEEEE;
            text-decoration: none;
            transition: color 0.3s;
            font-size: 1rem;
        }

        .footer-link:hover {
            color: #DC5F00;
        }

        .copyright {
            color: #888;
            font-size: 0.9rem;
            margin-top: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progress-bar"></div>

    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <!-- ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ© ŸÑŸÑŸàÿ∫Ÿà - ŸÉŸÖÿß ŸÅŸä ÿßŸÑŸÖÿ´ÿßŸÑ -->
            <div class="logo--area">
                <h1>
                    <a href="#" title="Tomito | ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÅŸÑÿßŸÖ Ÿà ŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™ ÿßŸàŸÜ ŸÑÿßŸäŸÜ">
                        <div class="en-text">
                            <span>mito</span>
                            <span>o</span>
                            <span>T</span>
                        </div>
                        <div class="ar-text">
                            <span>ŸÖŸäÿ™Ÿà</span>
                            <span>ÿ™Ÿà</span>
                        </div>
                    </a>
                </h1>
            </div>
            
            <div class="nav-links">
                <a href="#" class="nav-link active">
                    <i class="fas fa-home"></i>
                    ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-fire"></i>
                    ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ¥Ÿáÿ±ÿ©
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-calendar-alt"></i>
                    ÿßŸÑŸÇÿßÿØŸÖÿ©
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-tv"></i>
                    ÿßŸÑŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™
                </a>
            </div>
            
            <div class="search-container">
                <input 
                    type="text" 
                    class="search-input" 
                    id="search" 
                    placeholder="ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ£ŸÅŸÑÿßŸÖÿå ŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™..."
                    autocomplete="off"
                >
                <button class="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            
        </div>
    </nav>

    <!-- Color Filters Section -->
    <section class="color-filters" id="colorFilters">
        <div class="color-filters-container">
           
        </div>
    </section>

    <!-- Extended Filters Section -->
    <section class="extended-filters" id="extendedFilters">
        <div class="extended-filters-container">
            <div class="extended-filters-grid" id="extendedFiltersGrid">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿ®Ÿàÿßÿ≥ÿ∑ÿ© JavaScript -->
            </div>
            <!-- ÿ≤ÿ± ÿßŸÑŸÖÿ≤ŸäÿØ - ŸÖÿÆŸÅŸä ÿ≠ÿßŸÑŸäÿß Ÿàÿ≥Ÿäÿ∏Ÿáÿ± ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ© -->
            <div class="filters-dropdown" id="filtersDropdown"></div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Featured Carousel Section -->
        <section class="featured-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-crown"></i>
                    ÿßŸÑÿ£ŸÅŸÑÿßŸÖ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©
                </h2>
                <button class="view-all-btn" onclick="showAllMovies()">
                    <i class="fas fa-eye"></i>
                    ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ
                </button>
            </div>
            
            <div class="carousel-container">
                <button class="carousel-nav carousel-prev" onclick="scrollCarousel(-1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
                <div class="carousel-track" id="carouselTrack">
                    <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿ®Ÿàÿßÿ≥ÿ∑ÿ© JavaScript -->
                </div>
                
                <button class="carousel-nav carousel-next" onclick="scrollCarousel(1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
        </section>

        <!-- All Movies Section -->
        <section class="all-movies-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-film"></i>
                    ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÅŸÑÿßŸÖ
                </h2>
            </div>
            
            <!-- Movies Grid -->
            <div class="movies-grid" id="moviesGrid">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿ®Ÿàÿßÿ≥ÿ∑ÿ© JavaScript -->
            </div>
            
            <!-- Infinite Pagination -->
            <nav aria-label="Page navigation" class="pagination" id="pagination">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿ®Ÿàÿßÿ≥ÿ∑ÿ© JavaScript -->
            </nav>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <i class="fas fa-film"></i>
                Tomito - ÿπÿßŸÑŸÖ ÿßŸÑÿ≥ŸäŸÜŸÖÿß ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ
            </div>
            <div class="footer-links">
                <a href="#" class="footer-link">ŸÖŸÜ ŸÜÿ≠ŸÜ</a>
                <a href="#" class="footer-link">ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß</a>
                <a href="#" class="footer-link">ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©</a>
                <a href="#" class="footer-link">ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©</a>
                <a href="#" class="footer-link">ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©</a>
            </div>
            <p class="copyright">
                ¬© 2024 Tomito Movies. ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÅŸÑÿßŸÖ ŸÖŸÇÿØŸÖÿ© ŸÖŸÜ TMDB. Ÿáÿ∞ÿß ÿßŸÑŸÖŸàŸÇÿπ ŸáŸà ÿπÿ±ÿ∂ ÿ™Ÿàÿ∂Ÿäÿ≠Ÿä ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿ™ÿπŸÑŸäŸÖŸäÿ©.
            </p>
        </div>
    </footer>

    <!-- JavaScript Code -->
    <script>
        // ========================================
        // TMDB API CONFIGURATION
        // ========================================
        const API_KEY = "882e741f7283dc9ba1654d4692ec30f6";
        const BASE_URL = "https://api.themoviedb.org/3";
        const IMG_URL = "https://image.tmdb.org/t/p/w1280";
        const IMG_500 = "https://image.tmdb.org/t/p/w500";

        // ========================================
        // STATE MANAGEMENT
        // ========================================
        let savedMovies = JSON.parse(localStorage.getItem("savedMovies")) || [];
        let currentGenre = 'all';
        let currentPage = 1;
        let totalPages = 1;
        let allMovies = [];
        let carouselMovies = [];
        let genres = [];
        let currentColorFilter = 'black';
        
        // Scroll management
        let lastScrollTop = 0;
        let carouselPosition = 0;
        const CAROUSEL_CARD_WIDTH = 280 + 24; // 280px width + 24px gap

        // Extended filters management
        let visibleFilterCount = 8; // ÿπÿØÿØ ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿßŸÑŸÖÿ±ÿ¶Ÿäÿ© ŸÇÿ®ŸÑ ÿßŸÑŸÜŸÇÿ± ÿπŸÑŸâ "ÿßŸÑŸÖÿ≤ŸäÿØ"
        let isFiltersExpanded = false;

        // ========================================
        // PAGE INITIALIZATION
        // ========================================
        document.addEventListener("DOMContentLoaded", () => {
            console.log("üé¨ Tomito Movies - Initializing...");
            setupColorFilters();
            setupSearch();
            updateTheme();
            setupThemeToggle();
            setupLogoAnimation();
            setupScrollHide();
            loadGenres();
            loadCarouselMovies();
            loadAllMovies();
            
            // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ© ÿπŸÜÿØ ÿßŸÑŸÜŸÇÿ± ÿÆÿßÿ±ÿ¨Ÿáÿß
            document.addEventListener('click', (e) => {
                const dropdown = document.getElementById('filtersDropdown');
                const moreBtn = document.querySelector('.more-filters-btn');
                
                if (dropdown && moreBtn && 
                    !dropdown.contains(e.target) && 
                    !moreBtn.contains(e.target) &&
                    dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                    moreBtn.classList.remove('active');
                    moreBtn.innerHTML = '<i class="fas fa-chevron-down"></i> ÿßŸÑŸÖÿ≤ŸäÿØ';
                    isFiltersExpanded = false;
                }
            });
        });

        // ========================================
        // IMPROVED SCROLL HIDE FUNCTIONALITY FOR MOBILE
        // ========================================
        function setupScrollHide() {
            let ticking = false;
            let lastScrollY = window.scrollY;
            
            window.addEventListener('scroll', function() {
                lastScrollY = window.scrollY;
                
                if (!ticking) {
                    window.requestAnimationFrame(function() {
                        handleScrollHide(lastScrollY);
                        ticking = false;
                    });
                    ticking = true;
                }
            }, false);
        }

        function handleScrollHide(scrollTop) {
            const navbar = document.getElementById('navbar');
            const colorFilters = document.getElementById('colorFilters');
            const isMobile = window.innerWidth <= 768;
            
            // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ŸÖŸÜ ÿßŸÑÿ£ÿπŸÑŸâ
            const scrollDelta = scrollTop - lastScrollTop;
            
            if (scrollTop > 100) {
                if (scrollDelta > 5) {
                    // ÿßŸÑÿ™ŸÖÿ±Ÿäÿ± ŸÑÿ£ÿ≥ŸÅŸÑ - ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸáŸäÿØÿ±
                    navbar.classList.add('hidden');
                    if (isMobile) {
                        navbar.classList.add('compact');
                    }
                } else if (scrollDelta < -5) {
                    // ÿßŸÑÿ™ŸÖÿ±Ÿäÿ± ŸÑÿ£ÿπŸÑŸâ - ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸáŸäÿØÿ±
                    navbar.classList.remove('hidden');
                    if (scrollTop < 200) {
                        navbar.classList.remove('compact');
                    }
                }
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ£ÿ´Ÿäÿ± shifted ŸÑŸÇÿ≥ŸÖ ÿßŸÑŸÅŸÑÿßÿ™ÿ±
                colorFilters.classList.add('shifted');
            } else {
                // ÿ•ÿπÿßÿØÿ© ŸÉŸÑ ÿ¥Ÿäÿ° ÿ•ŸÑŸâ Ÿàÿ∂ÿπŸá ÿßŸÑÿ∑ÿ®ŸäÿπŸä
                navbar.classList.remove('hidden');
                navbar.classList.remove('compact');
                colorFilters.classList.remove('shifted');
            }
            
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        }

        // ========================================
        // LOGO ANIMATION SETUP
        // ========================================
        function setupLogoAnimation() {
            const logoArea = document.querySelector('.logo--area');
            const enText = document.querySelector('.en-text');
            const arText = document.querySelector('.ar-text');
            const middleT = document.querySelector('.en-text span:nth-child(2)');
            
            if (!logoArea || !middleT) return;
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿµŸàÿ™ ÿ∑ÿ±ŸÇ ÿßŸÑÿ®ÿßÿ® (ÿÆŸÅŸäŸÅ) ÿπŸÜÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÖ ÿπŸÑŸâ ÿßŸÑÿ¥ÿπÿßÿ±
            enText.addEventListener('mouseenter', function() {
                // ÿ•ŸÜÿ¥ÿßÿ° ÿµŸàÿ™ ÿ™ÿ£ÿ´Ÿäÿ±
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 300;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                } catch(e) {
                    console.log("ÿßŸÑÿµŸàÿ™ ÿ∫Ÿäÿ± ŸÖÿØÿπŸàŸÖ ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸÖÿ™ÿµŸÅÿ≠");
                }
            });
            
            // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≠ÿ±ŸàŸÅ ÿ®ÿπÿØ ÿßÿÆÿ™ŸÅÿßÿ¶Ÿáÿß
            enText.addEventListener('mouseleave', function() {
                const spans = this.querySelectorAll('span');
                if (spans) {
                    spans.forEach(span => {
                        span.style.transform = 'translateX(0) translateY(0) rotate(0deg)';
                        span.style.opacity = '1';
                    });
                }
            });
            
            console.log("‚úÖ Logo animation setup complete");
        }

        // ========================================
        // COLOR FILTERS FUNCTIONALITY
        // ========================================
        function setupColorFilters() {
            const filterButtons = document.querySelectorAll('.color-filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update current filter
                    currentColorFilter = this.getAttribute('data-color');
                    
                    // Apply color theme
                    applyColorTheme(currentColorFilter);
                    
                    console.log(`üé® Applied ${currentColorFilter} theme`);
                });
            });
        }

        function applyColorTheme(color) {
            const root = document.documentElement;
            
            switch(color) {
                case 'red':
                    document.documentElement.style.setProperty('--primary-color', '#CF0A0A');
                    document.documentElement.style.setProperty('--secondary-color', '#DC5F00');
                    document.documentElement.style.setProperty('--accent-color', '#EEEEEE');
                    break;
                    
                case 'orange':
                    document.documentElement.style.setProperty('--primary-color', '#DC5F00');
                    document.documentElement.style.setProperty('--secondary-color', '#CF0A0A');
                    document.documentElement.style.setProperty('--accent-color', '#EEEEEE');
                    break;
                    
                case 'gray':
                    document.documentElement.style.setProperty('--primary-color', '#EEEEEE');
                    document.documentElement.style.setProperty('--secondary-color', '#000000');
                    document.documentElement.style.setProperty('--accent-color', '#DC5F00');
                    break;
                    
                default: // black
                    document.documentElement.style.setProperty('--primary-color', '#000000');
                    document.documentElement.style.setProperty('--secondary-color', '#CF0A0A');
                    document.documentElement.style.setProperty('--accent-color', '#EEEEEE');
            }
            
            // Update CSS variables in real-time
            updateTheme();
        }

        function updateTheme() {
            // This function can be expanded to update more theme elements
            console.log(`üé® Theme updated to: ${currentColorFilter}`);
        }

        function setupThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    // Cycle through color filters
                    const filters = ['black', 'red', 'orange', 'gray'];
                    const currentIndex = filters.indexOf(currentColorFilter);
                    const nextIndex = (currentIndex + 1) % filters.length;
                    
                    // Simulate click on the next filter button
                    const nextFilter = filters[nextIndex];
                    const nextButton = document.querySelector(`.color-filter-btn[data-color="${nextFilter}"]`);
                    if (nextButton) {
                        nextButton.click();
                    }
                });
            }
        }

        // ========================================
        // LOAD GENRES
        // ========================================
        async function loadGenres() {
            try {
                const url = `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=ar`;
                const res = await fetch(url);
                const data = await res.json();
                
                genres = data.genres;
                setupExtendedFilters();
                
                console.log(`‚úÖ Loaded ${genres.length} genres`);
            } catch (error) {
                console.error("‚ùå Error loading genres:", error);
                // Fallback genres
                genres = [
                    { id: 28, name: 'ÿ£ŸÉÿ¥ŸÜ' },
                    { id: 12, name: 'ŸÖÿ∫ÿßŸÖÿ±ÿ©' },
                    { id: 16, name: 'ÿ±ÿ≥ŸàŸÖ ŸÖÿ™ÿ≠ÿ±ŸÉÿ©' },
                    { id: 35, name: 'ŸÉŸàŸÖŸäÿØŸäÿß' },
                    { id: 80, name: 'ÿ¨ÿ±ŸäŸÖÿ©' },
                    { id: 99, name: 'Ÿàÿ´ÿßÿ¶ŸÇŸä' },
                    { id: 18, name: 'ÿØÿ±ÿßŸÖÿß' },
                    { id: 10751, name: 'ÿπÿßÿ¶ŸÑŸä' },
                    { id: 14, name: 'ŸÅÿßŸÜÿ™ÿßÿ≤Ÿäÿß' },
                    { id: 36, name: 'ÿ™ÿßÿ±ŸäÿÆŸä' },
                    { id: 27, name: 'ÿ±ÿπÿ®' },
                    { id: 10402, name: 'ŸÖŸàÿ≥ŸäŸÇŸâ' },
                    { id: 9648, name: 'ÿ∫ŸÖŸàÿ∂' },
                    { id: 10749, name: 'ÿ±ŸàŸÖÿßŸÜÿ≥Ÿä' },
                    { id: 878, name: 'ÿÆŸäÿßŸÑ ÿπŸÑŸÖŸä' },
                    { id: 10770, name: 'ŸÅŸäŸÑŸÖ ÿ™ŸÑŸÅÿ≤ŸäŸàŸÜŸä' },
                    { id: 53, name: 'ÿ•ÿ´ÿßÿ±ÿ©' },
                    { id: 10752, name: 'ÿ≠ÿ±ÿ®Ÿä' },
                    { id: 37, name: 'ÿ∫ÿ±ÿ®Ÿä' }
                ];
                setupExtendedFilters();
            }
        }

        // ========================================
        // SETUP EXTENDED FILTERS WITH "MORE" BUTTON
        // ========================================
        function setupExtendedFilters() {
            const filtersGrid = document.getElementById('extendedFiltersGrid');
            const dropdown = document.getElementById('filtersDropdown');
            
            if (!filtersGrid || !dropdown) return;
            
            filtersGrid.innerHTML = '';
            dropdown.innerHTML = '';
            
            // Add "All" button
            const allButton = document.createElement('button');
            allButton.className = 'extended-filter-btn active';
            allButton.textContent = 'ÿßŸÑŸÉŸÑ';
            allButton.setAttribute('data-genre', 'all');
            allButton.onclick = () => filterByGenre('all');
            filtersGrid.appendChild(allButton);
            
            // Add visible genre buttons (limited number)
            const visibleGenres = genres.slice(0, visibleFilterCount - 1);
            
            visibleGenres.forEach(genre => {
                const button = document.createElement('button');
                button.className = 'extended-filter-btn';
                button.textContent = genre.name;
                button.setAttribute('data-genre', genre.id);
                button.onclick = () => filterByGenre(genre.id);
                filtersGrid.appendChild(button);
            });
            
            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿπÿØÿØ ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿßŸÑŸÖÿ±ÿ¶Ÿäÿ©ÿå ÿ£ÿ∂ŸÅ ÿ≤ÿ± "ÿßŸÑŸÖÿ≤ŸäÿØ"
            if (genres.length > visibleFilterCount - 1) {
                const moreButton = document.createElement('button');
                moreButton.className = 'more-filters-btn';
                moreButton.innerHTML = '<i class="fas fa-chevron-down"></i> ÿßŸÑŸÖÿ≤ŸäÿØ';
                moreButton.onclick = toggleMoreFilters;
                filtersGrid.appendChild(moreButton);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ©
                const remainingGenres = genres.slice(visibleFilterCount - 1);
                
                remainingGenres.forEach(genre => {
                    const button = document.createElement('button');
                    button.className = 'extended-filter-btn';
                    button.textContent = genre.name;
                    button.setAttribute('data-genre', genre.id);
                    button.onclick = () => {
                        filterByGenre(genre.id);
                        // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ≥ÿØŸÑÿ© ÿ®ÿπÿØ ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ±
                        dropdown.classList.remove('show');
                        moreButton.classList.remove('active');
                        moreButton.innerHTML = '<i class="fas fa-chevron-down"></i> ÿßŸÑŸÖÿ≤ŸäÿØ';
                        isFiltersExpanded = false;
                    };
                    dropdown.appendChild(button);
                });
            }
        }

        function toggleMoreFilters() {
            const dropdown = document.getElementById('filtersDropdown');
            const moreBtn = document.querySelector('.more-filters-btn');
            
            if (!dropdown || !moreBtn) return;
            
            if (isFiltersExpanded) {
                dropdown.classList.remove('show');
                moreBtn.classList.remove('active');
                moreBtn.innerHTML = '<i class="fas fa-chevron-down"></i> ÿßŸÑŸÖÿ≤ŸäÿØ';
            } else {
                dropdown.classList.add('show');
                moreBtn.classList.add('active');
                moreBtn.innerHTML = '<i class="fas fa-chevron-up"></i> ÿ£ŸÇŸÑ';
            }
            
            isFiltersExpanded = !isFiltersExpanded;
        }

        function filterByGenre(genreId) {
            // Update active button in visible filters
            const buttons = document.querySelectorAll('.extended-filter-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Find and activate the clicked button
            const activeBtn = document.querySelector(`.extended-filter-btn[data-genre="${genreId}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            } else {
                // If button is in dropdown, activate "All" button instead
                document.querySelector('.extended-filter-btn[data-genre="all"]').classList.add('active');
            }
            
            // Also check dropdown buttons
            const dropdownButtons = document.querySelectorAll('#filtersDropdown .extended-filter-btn');
            dropdownButtons.forEach(btn => btn.classList.remove('active'));
            
            const dropdownActiveBtn = document.querySelector(`#filtersDropdown .extended-filter-btn[data-genre="${genreId}"]`);
            if (dropdownActiveBtn) {
                dropdownActiveBtn.classList.add('active');
            }
            
            currentGenre = genreId;
            currentPage = 1;
            loadAllMovies();
        }

        // ========================================
        // LOAD CAROUSEL MOVIES
        // ========================================
        async function loadCarouselMovies() {
            try {
                showProgress();
                console.log("üé¨ Loading carousel movies...");
                
                // Get popular movies for carousel (20 movies)
                const url = `${BASE_URL}/movie/popular?api_key=${API_KEY}&language=ar&page=1`;
                const res = await fetch(url);
                const data = await res.json();
                
                carouselMovies = data.results.slice(0, 20); // Get 20 movies for carousel
                renderCarousel();
                
                console.log(`‚úÖ Loaded ${carouselMovies.length} carousel movies`);
                
            } catch (error) {
                console.error("‚ùå Error loading carousel movies:", error);
                // Fallback data
                carouselMovies = [
                    { 
                        id: 1, 
                        title: "ŸÜŸÖÿ± ŸÖŸÜ Ÿàÿ±ŸÇ", 
                        backdrop_path: "/sample1.jpg", 
                        vote_average: 8.5, 
                        release_date: "2024-01-01", 
                        overview: "ŸÅŸäŸÑŸÖ ÿ£ŸÉÿ¥ŸÜ ŸÖÿ´Ÿäÿ± ŸÖŸÜ ÿ®ÿ∑ŸàŸÑÿ© ÿßŸÑŸÜÿ¨ŸÖ ÿ£ÿ≠ŸÖÿØ ÿ≠ŸÑŸÖŸä ŸÅŸä ÿØŸàÿ± ÿ¨ÿØŸäÿØ ŸàŸÖÿ´Ÿäÿ±." 
                    },
                    { 
                        id: 2, 
                        title: "ÿ≠ÿ® ŸÅŸä ÿßŸÑÿ´ŸÑÿßÿ¨ÿ©", 
                        backdrop_path: "/sample2.jpg", 
                        vote_average: 7.8, 
                        release_date: "2024-02-01", 
                        overview: "ŸÉŸàŸÖŸäÿØŸäÿß ÿ±ŸàŸÖÿßŸÜÿ≥Ÿäÿ© ÿ™ÿØŸàÿ± ÿ£ÿ≠ÿØÿßÿ´Ÿáÿß ŸÅŸä ÿ®Ÿäÿ¶ÿ© ÿπŸÖŸÑ ŸÅÿ±ŸäÿØÿ© ŸÖŸÜ ŸÜŸàÿπŸáÿß." 
                    },
                    { 
                        id: 3, 
                        title: "ÿßŸÑŸÖŸÖÿ±", 
                        backdrop_path: "/sample3.jpg", 
                        vote_average: 8.2, 
                        release_date: "2024-03-01", 
                        overview: "ŸÖŸÑÿ≠ŸÖÿ© ÿ≠ÿ±ÿ®Ÿäÿ© ÿ™ÿßÿ±ŸäÿÆŸäÿ© ÿ™ÿ±ŸàŸä ŸÇÿµÿ© ÿ≠ÿ±ÿ® ÿ£ŸÉÿ™Ÿàÿ®ÿ± ÿßŸÑŸÖÿ¨ŸäÿØÿ©." 
                    }
                ];
                renderCarousel();
            } finally {
                hideProgress();
            }
        }

        function renderCarousel() {
            const carouselTrack = document.getElementById('carouselTrack');
            if (!carouselTrack) return;
            
            carouselTrack.innerHTML = '';
            carouselTrack.style.transform = `translateX(${carouselPosition}px)`;
            
            carouselMovies.forEach(movie => {
                const card = createCarouselCard(movie);
                carouselTrack.appendChild(card);
            });
        }

        function createCarouselCard(movie) {
            const card = document.createElement('div');
            card.className = 'carousel-card';
            
            const posterUrl = movie.backdrop_path ? IMG_URL + movie.backdrop_path : 
                             movie.poster_path ? IMG_500 + movie.poster_path : 
                             'https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80';
            const releaseYear = movie.release_date ? new Date(movie.release_date).getFullYear() : '2024';
            const rating = movie.vote_average ? movie.vote_average.toFixed(1) : '7.5';
            const description = movie.overview || 'ŸÅŸäŸÑŸÖ ŸÖÿ´Ÿäÿ± ŸÖŸÜ ŸÖÿ¨ŸÖŸàÿπÿ© ÿ™ŸàŸÖŸäÿ™Ÿà ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿäÿ©.';
            
            card.innerHTML = `
                <img src="${posterUrl}" alt="${movie.title}" loading="lazy">
                <div class="carousel-overlay">
                    <h3 class="carousel-card-title">${movie.title}</h3>
                    <div class="carousel-card-info">
                        <span class="carousel-rating">
                            <i class="fas fa-star"></i> ${rating}/10
                        </span>
                        <span class="carousel-year">${releaseYear}</span>
                    </div>
                    <p class="carousel-card-description">${description.substring(0, 100) + (description.length > 100 ? '...' : '')}</p>
                    <div class="carousel-card-btns">
                        <button class="carousel-play-btn" onclick="playMovie(${movie.id})">
                            <i class="fas fa-play"></i> ÿ¥ÿßŸáÿØ ÿßŸÑÿ¢ŸÜ
                        </button>
                        <button class="carousel-save-btn" onclick="toggleSave(${movie.id}, '${movie.title.replace(/'/g, "\\'")}', '${movie.poster_path}', ${movie.vote_average}, this)">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        function scrollCarousel(direction) {
            const carouselTrack = document.getElementById('carouselTrack');
            if (!carouselTrack) return;
            
            const containerWidth = carouselTrack.parentElement.offsetWidth;
            const trackWidth = carouselTrack.scrollWidth;
            const maxPosition = 0;
            const minPosition = containerWidth - trackWidth;
            
            carouselPosition += direction * (containerWidth * 0.8);
            
            // Infinite scroll effect
            if (carouselPosition > maxPosition) {
                carouselPosition = minPosition;
            } else if (carouselPosition < minPosition) {
                carouselPosition = maxPosition;
            }
            
            carouselTrack.style.transform = `translateX(${carouselPosition}px)`;
        }

        // ========================================
        // LOAD ALL MOVIES
        // ========================================
        async function loadAllMovies() {
            try {
                showProgress();
                console.log(`üé¨ Loading ${currentGenre === 'all' ? 'all' : 'genre'} movies - Page ${currentPage}...`);
                
                let url;
                
                if (currentGenre === 'all') {
                    // Load popular movies by default
                    url = `${BASE_URL}/movie/popular?api_key=${API_KEY}&language=ar&page=${currentPage}`;
                } else {
                    // Load movies by genre
                    url = `${BASE_URL}/discover/movie?api_key=${API_KEY}&language=ar&with_genres=${currentGenre}&page=${currentPage}`;
                }
                
                const res = await fetch(url);
                const data = await res.json();
                
                allMovies = data.results;
                totalPages = data.total_pages > 500 ? 500 : data.total_pages;
                
                displayAllMovies();
                updatePagination();
                
                console.log(`‚úÖ Loaded ${allMovies.length} movies`);
                
            } catch (error) {
                console.error("‚ùå Error loading movies:", error);
                allMovies = [];
                displayAllMovies();
                updatePagination();
            } finally {
                hideProgress();
            }
        }

        function displayAllMovies() {
            const container = document.getElementById("moviesGrid");
            if (!container) return;
            
            container.innerHTML = "";
            
            if (!allMovies || allMovies.length === 0) {
                container.innerHTML = '<div class="no-movies">ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ£ŸÅŸÑÿßŸÖ</div>';
                return;
            }
            
            allMovies.forEach((movie, index) => {
                const card = createMovieCard(movie);
                card.style.animationDelay = `${index * 0.05}s`;
                container.appendChild(card);
            });
        }

        function createMovieCard(movie) {
            const card = document.createElement("div");
            card.className = "movie-card";

            const posterUrl = movie.poster_path ? IMG_500 + movie.poster_path : 
                             movie.backdrop_path ? IMG_URL + movie.backdrop_path :
                             "https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80";
            const title = movie.title || "ŸÅŸäŸÑŸÖ ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ";
            const overview = movie.overview ? movie.overview.substring(0, 100) + "..." : "ÿ¥ÿßŸáÿØ Ÿáÿ∞ÿß ÿßŸÑŸÅŸäŸÑŸÖ ÿßŸÑŸÖÿ´Ÿäÿ± ÿπŸÑŸâ ÿ™ŸàŸÖŸäÿ™Ÿà.";
            const rating = movie.vote_average ? movie.vote_average.toFixed(1) : "ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ";
            const releaseYear = movie.release_date ? new Date(movie.release_date).getFullYear() : "2024";
            const genreName = getGenreName(movie.genre_ids?.[0]);
            
            const isSaved = savedMovies.some(m => m.id === movie.id);
            const saveIcon = isSaved ? 'fas fa-heart' : 'far fa-heart';
            const saveClass = isSaved ? 'saved' : '';

            card.innerHTML = `
                <img src="${posterUrl}" alt="${title}" loading="lazy">
                <div class="movie-overlay">
                    <div class="movie-header">
                        <h3>${title}</h3>
                        <span class="movie-rating"><i class="fas fa-star"></i> ${rating}</span>
                    </div>
                    <div class="movie-info">
                        <span class="movie-year">${releaseYear}</span>
                        <span class="movie-genre">${genreName}</span>
                    </div>
                    <p class="movie-description">${overview}</p>
                    <div class="movie-actions">
                        <button class="play-btn-sm" onclick="playMovie(${movie.id})">
                            <i class="fas fa-play"></i> ÿ¥ÿßŸáÿØ
                        </button>
                        <button class="save-btn-sm ${saveClass}" onclick="toggleSave(${movie.id}, '${title.replace(/'/g, "\\'")}', '${movie.poster_path}', ${movie.vote_average || 7}, this)">
                            <i class="${saveIcon}"></i>
                        </button>
                    </div>
                </div>
            `;
            return card;
        }

        function getGenreName(genreId) {
            const genre = genres.find(g => g.id === genreId);
            return genre ? genre.name : 'ŸÅŸäŸÑŸÖ';
        }

        // ========================================
        // INFINITE PAGINATION
        // ========================================
        function updatePagination() {
            const pagination = document.getElementById("pagination");
            if (!pagination) return;
            
            pagination.innerHTML = "";
            
            // Previous button
            const prevButton = document.createElement("button");
            prevButton.className = "pagination-nav-btn";
            prevButton.innerHTML = '<i class="fas fa-chevron-right"></i> ÿßŸÑÿ≥ÿßÿ®ŸÇ';
            prevButton.disabled = currentPage === 1;
            prevButton.onclick = () => goToPage(currentPage - 1);
            pagination.appendChild(prevButton);
            
            // Always show first page
            const firstPage = document.createElement("button");
            firstPage.className = `page-link ${currentPage === 1 ? 'active cursor-normal' : 'cursor-pointer'}`;
            firstPage.textContent = "1";
            if (currentPage !== 1) {
                firstPage.onclick = () => goToPage(1);
            }
            pagination.appendChild(firstPage);
            
            // Show ellipsis if needed
            if (currentPage > 4) {
                const ellipsis1 = document.createElement("span");
                ellipsis1.textContent = "...";
                ellipsis1.style.color = "#888";
                pagination.appendChild(ellipsis1);
            }
            
            // Show pages around current page
            const startPage = Math.max(2, currentPage - 2);
            const endPage = Math.min(totalPages - 1, currentPage + 2);
            
            for (let i = startPage; i <= endPage; i++) {
                if (i === 1 || i === totalPages) continue; // Skip first and last as they're handled separately
                
                const pageButton = document.createElement("button");
                pageButton.className = `page-link ${i === currentPage ? 'active cursor-normal' : 'cursor-pointer'}`;
                pageButton.textContent = i;
                if (i !== currentPage) {
                    pageButton.onclick = () => goToPage(i);
                }
                pagination.appendChild(pageButton);
            }
            
            // Show ellipsis if needed
            if (currentPage < totalPages - 3) {
                const ellipsis2 = document.createElement("span");
                ellipsis2.textContent = "...";
                ellipsis2.style.color = "#888";
                pagination.appendChild(ellipsis2);
            }
            
            // Always show last page if there is more than one page
            if (totalPages > 1) {
                const lastPage = document.createElement("button");
                lastPage.className = `page-link ${currentPage === totalPages ? 'active cursor-normal' : 'cursor-pointer'}`;
                lastPage.textContent = totalPages;
                if (currentPage !== totalPages) {
                    lastPage.onclick = () => goToPage(totalPages);
                }
                pagination.appendChild(lastPage);
            }
            
            // Next button
            const nextButton = document.createElement("button");
            nextButton.className = "pagination-nav-btn";
            nextButton.innerHTML = 'ÿßŸÑÿ™ÿßŸÑŸä <i class="fas fa-chevron-left"></i>';
            nextButton.disabled = currentPage === totalPages;
            nextButton.onclick = () => goToPage(currentPage + 1);
            pagination.appendChild(nextButton);
        }

        function goToPage(page) {
            if (page < 1 || page > totalPages || page === currentPage) return;
            
            currentPage = page;
            loadAllMovies();
            
            // Scroll to movies grid
            window.scrollTo({
                top: document.getElementById('moviesGrid').offsetTop - 100,
                behavior: 'smooth'
            });
        }

        // ========================================
        // SEARCH FUNCTIONALITY
        // ========================================
        function setupSearch() {
            const searchInput = document.getElementById("search");
            if (!searchInput) return;
            
            let searchTimeout;
            
            searchInput.addEventListener("input", (e) => {
                clearTimeout(searchTimeout);
                const query = e.target.value.trim();
                
                if (query.length < 2) {
                    // Reset to normal view
                    currentGenre = 'all';
                    currentPage = 1;
                    loadAllMovies();
                    return;
                }
                
                searchTimeout = setTimeout(() => {
                    searchMovies(query);
                }, 500);
            });
            
            const searchBtn = document.querySelector('.search-btn');
            if (searchBtn) {
                searchBtn.addEventListener('click', () => {
                    const query = searchInput.value.trim();
                    if (query.length >= 2) {
                        searchMovies(query);
                    }
                });
            }
            
            searchInput.addEventListener("keypress", (e) => {
                if (e.key === "Enter") {
                    const query = searchInput.value.trim();
                    if (query.length >= 2) {
                        searchMovies(query);
                    }
                }
            });
        }

        async function searchMovies(query) {
            try {
                showProgress();
                const url = `${BASE_URL}/search/movie?api_key=${API_KEY}&language=ar&query=${encodeURIComponent(query)}&page=${currentPage}`;
                const res = await fetch(url);
                const data = await res.json();

                allMovies = data.results;
                totalPages = data.total_pages > 500 ? 500 : data.total_pages;
                
                displayAllMovies();
                updatePagination();

                console.log(`üîç Found ${data.results.length} results for "${query}"`);

            } catch (error) {
                console.error("‚ùå Search error:", error);
                allMovies = [];
                displayAllMovies();
                updatePagination();
            } finally {
                hideProgress();
            }
        }

        // ========================================
        // SAVE FUNCTIONALITY
        // ========================================
        function toggleSave(id, title, posterPath, rating, btn) {
            const movie = { 
                id, 
                title, 
                poster_path: posterPath, 
                vote_average: rating,
                saved_date: new Date().toISOString()
            };
            
            const index = savedMovies.findIndex(m => m.id === id);
            if (index === -1) {
                savedMovies.push(movie);
                if (btn) {
                    btn.innerHTML = '<i class="fas fa-heart"></i>';
                    btn.classList.add("saved");
                    btn.classList.add("saved-animation");
                    setTimeout(() => btn.classList.remove("saved-animation"), 500);
                }
                console.log(`‚ù§Ô∏è Saved: ${title}`);
            } else {
                savedMovies.splice(index, 1);
                if (btn) {
                    btn.innerHTML = '<i class="far fa-heart"></i>';
                    btn.classList.remove("saved");
                }
                console.log(`üíî Removed: ${title}`);
            }
            
            localStorage.setItem("savedMovies", JSON.stringify(savedMovies));
            
            showNotification(index === -1 ? `ÿ™ŸÖÿ™ ÿ•ÿ∂ÿßŸÅÿ© "${title}" ÿ•ŸÑŸâ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©` : `ÿ™ŸÖÿ™ ÿ•ÿ≤ÿßŸÑÿ© "${title}" ŸÖŸÜ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©`);
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <i class="fas ${message.includes('ÿ•ÿ∂ÿßŸÅÿ©') ? 'fa-heart' : 'fa-times'}"></i>
                <span>${message}</span>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(45deg, #CF0A0A, #DC5F00);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 9999;
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 600;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease-out;
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out forwards';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // ========================================
        // PLAYER FUNCTIONALITY
        // ========================================
        function playMovie(id) {
            showProgress();
            setTimeout(() => { 
                const movie = allMovies.find(m => m.id === id) || carouselMovies.find(m => m.id === id);
                const movieTitle = movie?.title || "Ÿáÿ∞ÿß ÿßŸÑŸÅŸäŸÑŸÖ";
                showNotification(`ÿ¨ÿßÿ±Ÿä ÿ™ÿ¥ÿ∫ŸäŸÑ: ${movieTitle}`);
            }, 300);
        }

        function showAllMovies() {
            currentGenre = 'all';
            currentPage = 1;
            loadAllMovies();
            
            // Scroll to all movies section
            document.getElementById('moviesGrid').scrollIntoView({ behavior: 'smooth' });
        }

        // ========================================
        // PROGRESS BAR
        // ========================================
        function showProgress() {
            const bar = document.getElementById("progress-bar");
            if (bar) { 
                bar.style.display = "block"; 
                bar.style.transform = "scaleX(0)"; 
                setTimeout(() => {
                    bar.style.transform = "scaleX(0.7)";
                }, 10);
            }
        }

        function hideProgress() {
            const bar = document.getElementById("progress-bar");
            if (bar) { 
                bar.style.transform = "scaleX(1)"; 
                setTimeout(() => { 
                    bar.style.display = "none"; 
                }, 500);
            }
        }

        // ========================================
        // GLOBAL FUNCTIONS
        // ========================================
        window.playMovie = playMovie;
        window.toggleSave = toggleSave;
        window.scrollCarousel = scrollCarousel;
        window.showAllMovies = showAllMovies;
    </script>
</body>
</html>